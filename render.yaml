services:
  # A Docker web service
  - type: web
    name: panicsense-ph
    env: docker
    region: singapore  # Choose the appropriate region
    plan: starter      # Or choose another plan based on your needs
    buildCommand: "" # Docker images are pre-built
    startCommand: "" # CMD is specified in Dockerfile
    healthCheckPath: /api/health
    dockerfilePath: ./Dockerfile
    disk:
      name: data-volume
      mountPath: /data
      sizeGB: 1
    # Use Postgres as the database
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: panicsense-db
          property: connectionString
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "5000"
      - key: PYTHON_PATH
        value: "/venv/bin/python3"
      # Add any additional environment variables your application needs
      # For example, if you need OpenAI API key:
      # - key: OPENAI_API_KEY
      #   sync: false # This means it's a secret that you'll set manually

databases:
  # Create a Postgres database
  - name: panicsense-db
    plan: free
    region: singapore
    postgresMajorVersion: 15 # Specify PostgreSQL major version